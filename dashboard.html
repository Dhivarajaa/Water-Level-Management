<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>River Monitor Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
  <script>
  if (!localStorage.getItem("session")) {
    window.location.href = "index.html";
  }
</script>

  <style>
    /* --- CSS --- */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Poppins", sans-serif; }
    body { min-height:100vh; display:flex; align-items:center; justify-content:center; background: linear-gradient(135deg,#00b4d8,#0077b6);}
    .card { background:#fff; width:350px; padding:30px 25px; border-radius:15px; box-shadow:0 8px 20px rgba(0,0,0,0.2); text-align:center; display:none;}
    .card.active { display:block;}
    h2 { margin-bottom:20px; color:#023e8a;}
    form { display:flex; flex-direction:column;}
    label { text-align:left; margin-bottom:5px; font-weight:600; color:#333;}
    input { margin-bottom:15px; padding:10px; border:1px solid #aaa; border-radius:8px; font-size:15px; outline:none; transition:0.3s;}
    input:focus { border-color:#0077b6; box-shadow:0 0 5px rgba(0,119,182,0.3);}
    button { background-color:#0077b6; color:white; border:none; padding:10px; border-radius:8px; cursor:pointer; font-size:16px; transition:0.3s;}
    button:hover { background-color:#023e8a;}
    p { margin-top:10px; color:#333;}
    a { color:#0077b6; text-decoration:none; font-weight:600;}
    a:hover { text-decoration:underline;}
    .feature-container { display:flex; justify-content:center; margin-top:25px;}
    .feature-card { background:#f0f9ff; border-radius:12px; padding:15px; display:flex; flex-direction:column; align-items:center; cursor:pointer; transition:0.3s; width:200px;}
    .feature-card:hover { background:#caf0f8; transform:translateY(-5px);}
    .feature-card i { font-size:35px; color:#0077b6; margin-bottom:10px;}
    .feature-card span { font-weight:600; color:#023e8a;}
    .users-card { margin-top:25px; background:#e0f7fa; padding:15px; border-radius:12px; text-align:left;}
    .users-card h3 { color:#0077b6; margin-bottom:10px;}
    .dashboard p { margin:8px 0; color:#333;}
    @media (max-width:480px) { .card{width:90%;padding:25px 20px;} .feature-card{width:100%;} }

    /* Email box styling */
    .email-box { position:relative; display:flex; align-items:center; margin-bottom:15px;}
    .email-box input { flex:1; padding:10px; padding-right:80px; border:1px solid #aaa; border-radius:8px; font-size:15px; outline:none; transition:0.3s;}
    .email-box input:focus { border-color:#0077b6; box-shadow:0 0 5px rgba(0,119,182,0.3);}
    .email-box span { position:absolute; right:10px; color:#555; font-weight:500; pointer-events:none; font-size:14px;}
  </style>
</head>
<body>

  <!-- Login Page -->
  <div class="card active" id="loginPage">
    <h2>Login</h2>
    <form id="loginForm">
      <label>Email</label>
      <div class="email-box">
        <input type="text" id="loginUsername" placeholder="username" required>
        <span>@gmail.com</span>
      </div>
      <label>Password</label>
      <input type="password" id="loginPass" required>
      <button type="submit">Login</button>
    </form>
    <p>No account? <a href="#" id="toSignup">Signup here</a></p>
  </div>

  <!-- Signup Page -->
  <div class="card" id="signupPage">
    <h2>Signup</h2>
    <form id="signupForm">
      <label>Name</label>
      <input type="text" id="signupName" required>
      <label>Email</label>
      <div class="email-box">
        <input type="text" id="signupUsername" placeholder="username" required>
        <span>@gmail.com</span>
      </div>
      <label>Password</label>
      <input type="password" id="signupPass" required>
      <button type="submit">Signup</button>
    </form>
    <p>Already have an account? <a href="#" id="toLogin">Login here</a></p>
  </div>

  <!-- Dashboard Page -->
  <div class="card" id="mainPage">
    <h2>River Monitor Dashboard</h2>
    <p>Welcome to the River Monitor Dashboard! You are now logged in.</p>
    
    <div class="feature-container">
      <div class="feature-card">
        <i class="ri-dashboard-line"></i>
        <span>Go to Full Dashboard</span>
      </div>
    </div>

    <div class="users-card">
      <h3>Quick Actions</h3>
      <div class="dashboard" id="userDashboard">
        <p><strong>Welcome:</strong> <span id="currentUserName">Loading...</span></p>
        <p><strong>Email:</strong> <span id="currentUserEmail">Loading...</span></p>
      </div>
    </div>

    <p style="text-align:center;">
      <a href="#" id="logoutLink">Logout</a>
    </p>
  </div>

  <script>
    // --- JS ---
    const loginPage = document.getElementById("loginPage");
    const signupPage = document.getElementById("signupPage");
    const mainPage = document.getElementById("mainPage");

    const toSignup = document.getElementById("toSignup");
    const toLogin = document.getElementById("toLogin");

    const loginForm = document.getElementById("loginForm");
    const signupForm = document.getElementById("signupForm");

    const logoutLink = document.getElementById("logoutLink");
    const currentUserName = document.getElementById("currentUserName");
    const currentUserEmail = document.getElementById("currentUserEmail");

    // Page Switching
    toSignup.addEventListener("click", () => {
      loginPage.classList.remove("active");
      signupPage.classList.add("active");
    });
    toLogin.addEventListener("click", () => {
      signupPage.classList.remove("active");
      loginPage.classList.add("active");
    });

    // Signup
    signupForm.addEventListener("submit", e => {
      e.preventDefault();
      const name = document.getElementById("signupName").value.trim();
      const username = document.getElementById("signupUsername").value.trim();
      const email = username + "@gmail.com";
      const password = document.getElementById("signupPass").value;

      let users = JSON.parse(localStorage.getItem("users") || "[]");
      if(users.find(u=>u.email===email)) { alert("User already exists!"); return; }
      users.push({name,email,password});
      localStorage.setItem("users", JSON.stringify(users));
      alert("Signup successful! Please login.");
      signupForm.reset();
      signupPage.classList.remove("active");
      loginPage.classList.add("active");
    });

    // Login
    loginForm.addEventListener("submit", e => {
      e.preventDefault();
      const username = document.getElementById("loginUsername").value.trim();
      const email = username + "@gmail.com";
      const password = document.getElementById("loginPass").value;

      let users = JSON.parse(localStorage.getItem("users") || "[]");
      const user = users.find(u => u.email === email && u.password === password);
      if(!user){ alert("Invalid credentials!"); return; }

      currentUserName.textContent = user.name;
      currentUserEmail.textContent = user.email;
      loginPage.classList.remove("active");
      mainPage.classList.add("active");
    });

    // Logout
    logoutLink.addEventListener("click", e => {
      e.preventDefault();
      mainPage.classList.remove("active");
      loginPage.classList.add("active");
    });
  </script>
</body>
</html>
